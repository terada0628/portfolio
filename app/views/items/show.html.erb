<div class="container">
  <div class="row my-4">

    <div class="col-4 col-md-3 col-lg-2">
      <div class="genre ml-1">
        <br><br><strong>ジャンル検索</strong>
        <ul class="list-group">
          <% @genres.each do |genre| %>
          <li><%= link_to genre.name, items_path(genre.items) %></li>
          <% end %>
        </ul>
      </div>
      <br>
      <div class="popular ml-1">
        <strong>人気ランキング</strong>
        <ol class="list-group">
          <% @all_ranks.each do |item| %>
          <li><%= link_to item.name, item_path(item) %></li>
          <% end %>
        </ol>
      </div>
    </div>


    <div class="col-8 ml-md-3 ml-lg-5">
      <%= attachment_image_tag @item, :image, :width => '100%', :height => '60%', format:'jpeg' %>
      <h2><%= @item.name %></h2><br>
      <p>
        <%= @item.introduction %><br>
        ¥<%= @item.price %>
      </p>

      <% if customer_signed_in? %>

        <!--いいね機能-->
        <div id="favorite-btn_<%= @item.id %>">
          <%= render partial: 'favorites/favorite-btn', locals: {item: @item} %>
        </div>

        <!--カートに入れるフォーム-->
        <% if @cart_item.errors.any? %>
          <%= @cart_item.errors.full_messages.each do |message| %>
            <%= message %>
          <% end %>
        <% end %>
        <%= form_with(model:@cart_item, url:cart_items_path, method: :post, local: true) do |f| %>
          <%= f.hidden_field :item_id, value: @item.id %>
          <label>個数選択</label> <%= f.select :amount, options_for_select((1..20).to_a) %>
          <%= f.submit "カートに入れる", class: "btn btn-success" %>
        <% end %>

      <% else %>
        <p><strong>購入される方は <%= link_to "新規登録", new_customer_registration_path, class:"btn btn-outline-primary" %> または <%= link_to "ログイン", new_customer_session_path, class:"btn btn-outline-primary" %> してください</strong></p>
      <% end %>

    </div>
  </div>
</div>
